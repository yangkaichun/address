<!DOCTYPE html>
<html>
<head>
    <title>Find Nearby Resources</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; margin: 20px; }
        input[type="text"] { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }
        button { padding: 10px 15px; margin-right: 10px; }
        #results { margin-top: 20px; }
        .resource { margin-bottom: 15px; border: 1px solid #ccc; padding: 10px; }
        .resource a { display: block; margin-top: 5px; color: blue; text-decoration: none; }
    </style>
</head>
<body>
    <h1>Find Nearby Resources</h1>

    <div>
        <input type="text" id="searchInput" placeholder="Enter your search term or speak">
        <button id="searchButton">Search</button>
        <button id="voiceButton">Voice Search</button>
    </div>

    <div id="results">
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const voiceButton = document.getElementById('voiceButton');
            const resultsDiv = document.getElementById('results');

            searchButton.addEventListener('click', performSearch);

            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US'; // You can set the language

                voiceButton.addEventListener('click', () => {
                    recognition.start();
                });

                recognition.onresult = (event) => {
                    const speechResult = event.results[0][0].transcript;
                    searchInput.value = speechResult;
                    performSearch();
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                };
            } else {
                voiceButton.style.display = 'none';
                alert('Voice search is not supported in your browser.');
            }

            function performSearch() {
                const searchTerm = searchInput.value.trim();
                if (!searchTerm) {
                    alert('Please enter a search term.');
                    return;
                }

                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(positionSuccess, positionError);
                } else {
                    alert('Geolocation is not supported by your browser.');
                }
            }

            function positionSuccess(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                const searchTerm = document.getElementById('searchInput').value.trim();

                // In a real application, you would use the Google Places API here
                // with the searchTerm, latitude, and longitude to get nearby resources.

                // For this example, we will simulate some results.
                const mockResults = [
                    { name: 'Sample Resource 1', address: 'Sample Address 1', latitude: latitude + 0.001, longitude: longitude + 0.001 },
                    { name: 'Sample Resource 2', address: 'Another Address', latitude: latitude - 0.002, longitude: longitude - 0.002 },
                    // ... add more mock results
                ];

                displayResults(mockResults);
            }

            function positionError(error) {
                alert('Error getting location: ' + error.message);
            }

            function displayResults(results) {
                resultsDiv.innerHTML = '';
                if (results && results.length > 0) {
                    for (let i = 0; i < Math.min(10, results.length); i++) {
                        const resource = results[i];
                        const resourceDiv = document.createElement('div');
                        resourceDiv.classList.add('resource');
                        resourceDiv.innerHTML = `<h3>${resource.name}</h3><p>${resource.address}</p>`;
                        const googleMapsLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(resource.name + ' ' + resource.address)}&ll=${resource.latitude},${resource.longitude}`;
                        const linkElement = document.createElement('a');
                        linkElement.href = googleMapsLink;
                        linkElement.textContent = 'View on Google Maps';
                        resourceDiv.appendChild(linkElement);
                        resultsDiv.appendChild(resourceDiv);
                    }
                } else {
                    resultsDiv.innerHTML = '<p>No resources found.</p>';
                }
            }
        });
    </script>
</body>
</html>
